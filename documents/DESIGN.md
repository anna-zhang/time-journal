A “design document” for your project in the form of a Markdown file called DESIGN.md that discusses, technically, how you implemented your project and why you made the design decisions you did. Your design document should be at least several paragraphs in length. Whereas your documentation is meant to be a user’s manual, consider your design document your opportunity to give the staff a technical tour of your project underneath its hood.

PART I: application.py & helpers.py
To start off, let's look at application.py, perhaps one of the most important files. While some parts of it may seem reminiscent of Finance's application.py, there are also a lot of other functions that make the web application very different from Finance. Let's take a look at the function under each app.route.

First we have @app.route("/"), which has def index(). This renders index.html, which displays the name of the web application, "Time Journal," followed by a one-line brief overview of what the web application is. When the user clicks on "Time Journal" in the navigation bar, this is the homepage of the web application that is displayed when the user is not logged in (does not have @login_required) and in layout.html it is under the "else" for the condition "{% if session.user_id %}".

Next is @app.route("/timelog"), which has def timejournal() and is the main part of the program. This requires a login (@login_required). When the function is accessed via POST or GET, it will display the journal of recorded activities for a day. By default, it will display the journal of recorded activities for the current date through the function current_date(), which is defined in helpers.py. However, if the user selects a specific date (as through the date form in timelog.html), then it will display the journal of recorded activities for the chosen date. In order to get the information (activity name, activity category, duration, and notes), it queries the table called "activities" in the database for all rows that that specific user inputted (determined if user_id=session["user_id"]) and for that specific date, sorting the rows by start time so that the activities are in chronological order.
However, if nothing was queried, meaning that no activities have been recorded for that date and user so far, then it will render nothing.html, which displays an empty journal message followed by a link to add an entry.
In order to get a summary of how the user is spending their time across the categories and ratings, next there is a variable defined for every category and rating that is set to 0, or 0 total hours for each category and rating. Then it iterates through all of the rows that were queried from the "activities" table for that specific date and user, and looks at the category and rating columns. It adds the number of hours, or timespent, for that activity to the total number of hours spent in that category and that rating.
Next, a dictionary is created that stores the category/rating and the corresponding total hours spent doing things in that category or with that rating. It sums up the total hours of logged activities by adding all of the total category hours and finds the hours remaining that were not logged by subtracting the total hours of logged activities from 24 (total number of hours in a day). This will later be used in the pie chart for the summary section. Then, a list of all of the categories is created, which will later be used to iterate through when inserting/updating total hours spent in each category.
Then it executes a database query that gets all the information for all rows in the
"timesummary" table for that specific user for that specific date. If there are no rows returned, that means that there is no information stored about category time totals for a user on that specific date, so it inserts the information to the database based on the above calculated category hours as by iterating through the list of categories and for each category, getting the corresponding number of hours spent for that category key in the category_hours dictionary. It also inserts the number of total hours the user spent in activities rated as "disliked" and activities rated as "liked" on a specific day in the timesummary table. If there are rows returned from the previous database query, then that means that there already exists information stored about category time totals for a user on a specific date. Instead of inserting new rows, the program updates the information to the database based on the above, most recent calculated category hours, which accounts for the possibility that users may have added new activity entries for a date. To do this, it follows the same logic as if inserting a completely new row into the table, but instead of "INSERT" it uses "UPDATE."
Next, it gets all of the total hours spent in each category for a user on a specific date (with the updated values). The program gives advice to the user based on the previously calculated category totals. If the user logged less than 7 hours spent for activities in the "sleep" category, it recommends for the user to sleep more. If the user logged more hours spent doing activities that they rated as "disliked" than "liked," it recommends for the user to do more activities that they enjoy doing. If the user logged less than half an hour spent for activities in the "exercise" category, recommend for the user to exercise more. If the user logged less than 1 hour spent for activities in the "food" category, it checks to make sure the user is eating enough. If none of these conditions are met, then the program just says that the user is doing great.
Then it formats the data and the categories with the corresponding total number of hours spent doing activities in that category as a list of lists. pie_data is this data stored as the format that Google's pie chart generator uses, which will be needed in order to create the summary visualization pie chart.
With all of this information collected, it lastly renders timelog.html, which is the HTML page that displays the recorded activities, summary of activities, and advice.

Let's now take a look at @app.route("/entry"), which contains def entry(). When accessed via "GET," this function simply renders entry.html, which is a form where users can enter information about an activity that they want to record. When accessed via "POST," as when the user submits the form on entry.html, this function checks to make sure that all of the form inputs that are required exist and art valid. If a field is missing or invalid, it will render an apology with the reason why it can not accept this input. If there are no issues with any of the fields, it stores all of the values stored in the input fields as variables. Based on the inputted start time and end time, it automatically calculates the duration of the activity in minutes using the timespent() defined in helpers.py. It calculates the duration in both hours and minutes. All of this information (name of activity, category of activity, activity date, duration in hours, duration in minutes, start time, end time, activity notes (if they exist), and activity rating, as well as user id) is inserted into the "activities" table of the database, so it can later be queried when displaying the Time Journal for a given day. The program then redirects the user to /timelog, which on default will display the activity records, summary, and advice for the current date.

Moving on to something that looks a little more familiar, you'll next find @app.route("/login"), which replicates Finance's, and redirects the user to @app.route("/timelog") if the user successfully logs in. @app.route("/logout") is the same as Finance's, with the only difference being that it redirects the user to @app.route("/") and gets the homepage. @app.route("register") is also the same as Finance's, and if the user successfully registers, it redirects the user to @app.route("/timelog").

PART II: The HTML Pages
As used in Finance, apology.html displays an error message if user tries to do something that the web application cannot support. Depending on what went wrong, it will display a related error message. entry.html contains a form that allows users to input information about an activity (activity name, start time, end time, date, activity category, activity rating, and optional notes about the activity). index.html is simply the homepage that gives the web application's name, "Time Journal," and a brief one-line description. This page is used as the homepage when the user is not logged in. layout.html is the layout template that extends to each webpage; it displays a different navigation bar depending on if the user is logged in or not. If logged in, the user will be able to add activity entries, access their Time Journal, and logout. If not logged in, the menu contains login, register, or the Time Journal homepage. login.html is the login page for users with accounts. register.html contains the register form for new users. nothing.html is the page that is shown if there were no activity entries added by that user for that specific date. On that page, the message "No entries to display." is shown, followed by a link the user can click on to "Add an Entry."
timelog.html is the most important page. This page displays a form that contains one field, "date," which the user can use if they want to get back their Time Journal for a specific date. If no date is specified, the default is used, which is the current date. First, the page contains a table that lists all of the activities logged for that date in chronological order. This table can be sortable by any of the table's columns through JavaScript sortable tables. The time spent is displayed in terms of hours if the activity's duration is > 1 hour, or in terms of minutes if the activity's duration is < 1 hour. This page also contains two buttons "Show Summary/Hide Summary" and "Show Advice/Hide Advice." When "Show Summary" is clicked, the page displays a pie chart that uses the activity category name and the total hours spent doing activities in that category calculated in def timejournal() in application.py. This serves as a visualization so that the user can see how much of their day they are spending doing things in each category. The page then displays this same information in a table so that users can see it numerically, in addition to the above visual supplement. Again, time spent is displayed in terms of hours if the total time spent in the activity category is > 1 hour, or in terms of minutes if the total time spent in the activity category < 1 hour. If "Hide Summary" is clicked, the div containing the pie chart and table will be hidden. When "Show Advice" is clicked, the page displays a slideshow of advice that had been determined in def timejournal() in application.py. The right and left arrows of the slideshow can be used to go to the following piece of advice or go back to the previous piece of advice. If "Hide Advice" is clicked, the div containing the advice slideshow will be hidden and the slideshow will no longer be displayed.

PART III: The Database
The database "timejournal.db" contains three tables. The "activities" table contains 11 columns, which store the information the user inputs about an activity in the form on entry.html. This includes the id of the user, as well as the name, id, category, date, start time, end time, calculated duration in hours, calculated duration in minutes, rating, and notes of the activity. The "timesummary" table contains five columns, which store the information of how much time was spent doing activities in each category on a date, as calculated in def timejournal() in application.py. The columns include the id of the user, the date, the category name, the total time spent in the category in hours, and the total time spent in the category in minutes. The "users" table contains three columns, and stores the account information of each user of the web application. The unique IDs of the user are stored in the id column (and is a primary key because it is unique), the username column stores their usernames (which must also be a unique value as no two usernames can be the same), and hash stores the user's passwords after hashing.

LIMITATION:
A limitation of the project is that the program assumes that the user will not input more than 24 hours worth of activities for a given day. If the user puts in more than 24 hours worth of activities for a given day, the pie chart will throw an error message.

That's all! Thank you for taking the time to check out what's going on behind the scenes of Time Journal!!
